<!DOCTYPE html>
<html>
    <head>
        <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet" />
        <link href="./css/main.css" rel="stylesheet" />
        <title>Fernando TULA</title>
    </head>
    <body>
        <div class="cuerpo">
            <section class="titulo">
                <span><img class="FT" src="images/Fernando TULA.png" alt=""></span>
                <div class="subtitulo">Caminante no hay camino, se hace camino al andar. - Antonio MACHADO</div>
                <br><br>
            </section>
            <a href="#" title="Modo oscuro" class="modo" onclick="return false;"></a>
            <a href="#" title="En inglés" class="idioma" onclick="return false;"></a>
            <section class="sobreMi" id="sobremi">
            </section>
            <nav>
                <div class="enlaceDesarrollo">
                    <a href="https://www.instagram.com/ftula_desarrollo/" target="_blank">
                        <img class="logos" src="images/logoIIT.png" data-rol="Desarrollo">
                    </a>
                </div>
                <section class="textoDesarrollo" id="desarrollo">                    
                </section>
                <div class="enlaceDiseño">
                    <a href="https://www.instagram.com/ftula_disenio/" target="_blank">
                        <img class="logos" src="images/logoDiseño.png" data-rol="Diseño">
                    </a>
                </div>
                <section class="textoDiseño" id="diseno">
                </section>
                <div class="enlaceFotografia">
                    <a href="https://www.instagram.com/ftula_fotografia/" target="_blank">
                        <img class="logosF" src="images/logoFotografia.png" data-rol="Fotografia">
                    </a>
                </div>
                <section class="textoFotografia" id="fotografia">
                </section>
                <span class="linkedin"><a href="https://www.linkedin.com/in/fernando-tula/" target="_blank">LinkedIn</a></span>
            </nav>
        </div>
        <!-- scripts -->
        <script>
            //Inhabilita las interacciones para modos tablet y móvil
            let habilitarInteracciones=false

            function activarInteracciones()
            {
                if (habilitarInteracciones) return
                habilitarInteracciones=true
                //Interacción de enlaces
                document.querySelectorAll('.logos, .logosF').forEach(logo => 
                {
                    logo.addEventListener('mouseenter', controladorMouseSobre)
                    logo.addEventListener('mouseleave', controladorMouseFuera)
                });
            }

            function desactivarInteracciones()
            {
                if(!habilitarInteracciones) return
                habilitarInteracciones=false
                //Interacción de enlaces
                document.querySelectorAll('.logos, .logosF').forEach(logo => 
                {
                    logo.removeEventListener('mouseenter', controladorMouseSobre)
                    logo.removeEventListener('mouseleave', controladorMouseFuera)
                });
                location.reload()
            }

            function aEspañol()
            {
                fetch('sobremi.txt')
                .then(response => response.text())
                .then(data => {
                    document.getElementById('sobremi').innerText = data;
                    //document.getElementById("español").disabled=true
                    //document.getElementById("ingles").disabled=false
                });

                fetch('desarrollo.txt')
                .then(response => response.text())
                .then(data => {
                    document.getElementById('desarrollo').innerText = data;
                });

                fetch('diseno.txt')
                .then(response => response.text())
                .then(data => {
                    document.getElementById('diseno').innerText = data;
                });

                fetch('fotografia.txt')
                .then(response => response.text())
                .then(data => {
                    document.getElementById('fotografia').innerText = data;
                });
            }

            function aIngles()
            {
                fetch('aboutme.txt')
                .then(response => response.text())
                .then(data => {
                    document.getElementById('sobremi').innerText = data;
                    //document.getElementById("español").disabled=true
                    //document.getElementById("ingles").disabled=false
                });

                fetch('development.txt')
                .then(response => response.text())
                .then(data => {
                    document.getElementById('desarrollo').innerText = data;
                });

                fetch('design.txt')
                .then(response => response.text())
                .then(data => {
                    document.getElementById('diseno').innerText = data;
                });

                fetch('photography.txt')
                .then(response => response.text())
                .then(data => {
                    document.getElementById('fotografia').innerText = data;
                });
            }

            function controladorMouseSobre(e)
            {
                const rol=e.target.dataset.rol
                document.querySelector('.sobreMi').style.opacity = '0.2';
                document.querySelector(`.texto${rol}`).style.opacity = '1';
                document.querySelector(`.enlace${rol}`).style.boxShadow = '0 0 15px Yellow';
            }

            function controladorMouseFuera(e)
            {
                document.querySelector('.sobreMi').style.opacity = '1';
                document.querySelector('.textoDesarrollo').style.opacity = '0';
                document.querySelector('.enlaceDesarrollo').style.boxShadow = '0 0 0 Yellow';
                document.querySelector('.textoDiseño').style.opacity = '0';
                document.querySelector('.enlaceDiseño').style.boxShadow = '0 0 0 Yellow';
                document.querySelector('.textoFotografia').style.opacity = '0';
                document.querySelector('.enlaceFotografia').style.boxShadow = '0 0 0 Yellow';
            }

            //Verifica el tamaño inicial
            if (window.innerWidth>1366)
            {
                activarInteracciones()
            }

            //Atiende cambios de tamaño
            window.addEventListener("resize",() =>
            {
                if(window.innerWidth>1366)
                {
                    activarInteracciones()
                }
                else
                {
                    desactivarInteracciones()
                }
            })

            //Cambio modo diurno-octurno
            const btnModo = document.querySelector(".modo");
            // Verificamos si el usuario ya tenía una preferencia guardada
            if (localStorage.getItem("modo") === "oscuro")
            {
                document.body.classList.add("dark-mode");
                btnModo.title = "Modo claro";
            }
            else
            {
                btnModo.title = "Modo oscuro";
            }
            btnModo.addEventListener("click", () => {
                document.body.classList.toggle("dark-mode");
                // Cambiar el título del botón
                if (document.body.classList.contains("dark-mode"))
                {
                    localStorage.setItem("modo", "oscuro");
                    btnModo.title = "Modo claro";
                }
                else
                {
                    localStorage.setItem("modo", "claro");
                    btnModo.title = "Modo oscuro";
                }
            });

            //Cambio modo idioma
            // Elemento del botón de idioma
            const btnIdioma = document.querySelector(".idioma");

            // Cargar idioma al iniciar
            window.onload = function() {
                const idioma = localStorage.getItem("idioma") || "ingles";
                if (idioma === "espanol") {
                    aEspañol();
                    btnIdioma.style.backgroundImage = 'url("images/AIngles.png")';
                    btnIdioma.title = "En español";
                } else {
                    aIngles();
                    btnIdioma.style.backgroundImage = 'url("images/AEspanol.png")';
                    btnIdioma.title = "En Inglés";
                }
            };

            // Evento click del botón
            btnIdioma.addEventListener("click", () => {
                const idiomaActual = localStorage.getItem("idioma") || "ingles";
                if (idiomaActual === "ingles") {
                    aEspañol();
                    localStorage.setItem("idioma", "espanol");
                    btnIdioma.style.backgroundImage = 'url("images/AIngles.png")';
                    btnIdioma.title = "In English";
                } else {
                    aIngles();
                    localStorage.setItem("idioma", "ingles");
                    btnIdioma.style.backgroundImage = 'url("images/AEspanol.png")';
                    btnIdioma.title = "En Español";
                }
            });

            // Cargar español al iniciar la página
            //window.onload = function()
            //{
            //    aEspañol();
                //aIngles();
            //};

        </script>         
    </body>
</html>
